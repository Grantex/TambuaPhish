<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Email Template</title>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <style>
    .form-container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
    }
    #editor {
      height: 200px;
      background-color: white;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2>Edit Email Template</h2>
    <form id="templateForm" method="POST">
        {{ form.hidden_tag() }}

        <label for="template_name">Template Name:</label>
        {{ form.template_name(size=40) }}<br><br>

        <label for="sender_name">Sender Name:</label>
        {{ form.sender_name(size=40) }}<br><br>

        <label for="subject">Subject:</label>
        {{ form.subject(size=40) }}<br><br>

        <label for="email_body">Email Body:</label>
        <div id="editor"></div>
        {{ form.email_body(id="email_body") }}<br>

        {{ form.submit() }}
    </form>
  </div>

  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    const quill = new Quill('#editor', {
      theme: 'snow'
    });

    // Set editor content
    quill.root.innerHTML = `{{ form.email_body.data|safe }}`;

    // On form submit, copy the Quill content to the hidden field
    const form = document.getElementById('templateForm');
    form.onsubmit = function() {
      document.getElementById('email_body').value = quill.root.innerHTML;
    };
  </script>
</body>
</html>
